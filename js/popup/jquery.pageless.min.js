(function(e){var p=!1,f=!p,a,r=p,j,k=".pageless",n="scroll"+k,h="resize"+k,t={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"assets/img/loader.gif",canvas:false},l,q;e.pageless=function(w){e.isFunction(w)?t.call():s(w)};var i=function(){return t.loaderHtml||'<div id="pageless-loader" style="display:none;text-align:center;width:100%;position:absolute;top:200px;left:0px;">  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>  <img src="'+t.loaderImage+'" alt="loading more results" style="margin:10px auto" /></div>'};var s=function(w){if(t.inited){return}t.inited=f;if(w){e.extend(t,w)}l=t.container;q=e(l);if(t.pagination){e(t.pagination).remove()}if(t.canvas){b()}else{o()}};e.fn.pageless=function(z,y){if(z=="set"){d(y)}else{if(z=="get"){getOption(y)}else{if(z=="load"){g()}else{var x=e(this),w=e(y.loader,x);s(y);a=x;if(y.loader&&w.length){j=w}else{j=e(i());x.append(j);if(!y.loaderHtml){e("#pageless-loader .msg").html(y.loaderMsg)}}}}}};var d=function(w){e.extend(t,w)};var c=function(w){(r=w)?(j&&j.fadeIn("normal")):(j&&j.fadeOut("normal"))};var v=function(){return(l===window)?e(document).height()-q.scrollTop()-q.height():q[0].scrollHeight-q.scrollTop()-q.height()};var u=function(){q.unbind(k)};var b=function(){var w=function(){FB.Canvas.getPageInfo(function(x){if(t.totalPages<=t.currentPage){u();if(t.end){t.end.call()}return}var y=(e(document).height()-x.scrollTop-1000);if(!r&&(y<t.distance)){c(f);t.currentPage++;e.extend(t.params,{page:t.currentPage});e.get(t.url,t.params,function(z){e.isFunction(t.scrape)?t.scrape(z):z;j?j.before(z):a.append(z);c(p);if(t.complete){t.complete.call()}},"html")}})}};var o=function(){q.bind(n,m).trigger(n)};var m=function(w){if(t.totalPages<=t.currentPage){u();if(t.end){t.end.call()}return}if(!r&&(v()<t.distance)){c(f);t.currentPage++;e.extend(t.params,{page:t.currentPage});e.get(t.url,t.params,function(x){e.isFunction(t.scrape)?t.scrape(x):x;j?j.before(x):a.append(x);c(p);if(t.complete){t.complete.call()}},"html")}};var g=function(w){if(!r){c(f);t.currentPage++;e.extend(t.params,{page:t.currentPage});e.get(t.url,t.params,function(x){e.isFunction(t.scrape)?t.scrape(x):x;j?j.before(x):a.append(x);c(p);if(t.complete){t.complete.call()}},"html")}}})(jQuery);